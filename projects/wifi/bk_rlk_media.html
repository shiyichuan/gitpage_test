

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BK-RLK Multi-media demo &mdash; Beken Armino AVDK Development Framework v2.0.1.32 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=a9bcf9c9" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/mixxx.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/widget-sidebar.css?v=67e040fc" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=19145764"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/js/custom.js?v=d94e43c0"></script>
      <script src="../../_static/js/widget-sidebar.js?v=bb4ea66f"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Peripheral" href="../peripheral/index.html" />
    <link rel="prev" title="Wi-Fi projects code" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Beken Armino AVDK Development Framework
              <img src="../../_static/armino_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">HW Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support_peripherals/index.html">Support Peripherals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lcd/index.html">LCD display</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../camera/index.html">Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../psram_config/index.html">Psram mem config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../video_codec/index.html">Video Codec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gui/index.html">    GUI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Reference Projects</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media/index.html">Multi-media</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lvgl/index.html">LVGL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thirdparty/index.html">thirdparty</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Wi-Fi</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">BK-RLK Multi-media</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functional-overview">1 Functional Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#demo-introduction">2 Demo Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-construction">3 Environment Construction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-path">4 Code Path</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reference-materials">5 Reference Materials</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../peripheral/index.html">Peripheral</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../power_save/index.html">Power Save</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../audio_algorithms/index.html">    Audio Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/index.html">    FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.bekencorp.com/">    Document Center</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Beken Armino AVDK Development Framework</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Reference Projects</a></li>
          <li class="breadcrumb-item"><a href="index.html">Wi-Fi projects code</a></li>
      <li class="breadcrumb-item active">BK-RLK Multi-media demo</li>
<li class="wy-breadcrumbs-aside">
</li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bk-rlk-multi-media-demo">
<h1>BK-RLK Multi-media demo<a class="headerlink" href="#bk-rlk-multi-media-demo" title="Link to this heading"></a></h1>
<p><a class="reference external" href="../../../../en/latest/projects/wifi/bk_rlk_media.html">[English]</a></p>
<section id="functional-overview">
<h2>1 Functional Overview<a class="headerlink" href="#functional-overview" title="Link to this heading"></a></h2>
<blockquote>
<div><p>Based on BK-RLK wireless communication solution,the demo realized the function of transmitting one-way video, two-way audio and local LCD display from a single devices to multiple devices. Through this demo, user can see how to realize device discovery,connection,business data transmission and low power consumption management with the help of BK-RLK wireless communication solution.</p>
</div></blockquote>
</section>
<section id="demo-introduction">
<h2>2 Demo Introduction<a class="headerlink" href="#demo-introduction" title="Link to this heading"></a></h2>
<blockquote>
<div><p>BK-RLK multi-media demo is a multi-media communication system based on multiple devices supporting BK-RLK,which is divided into Client and Server.It is mainly demonstrates the use of the following functions of BK-RLK:</p>
<ul class="simple">
<li><p>Connection communication guide between Client and Server</p></li>
<li><p>Power save guide between Client and Server</p></li>
<li><p>Video and audio transmission guide between Client and Server</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Connection communication guide between Client and Server:</dt><dd><p>BK-RLK multi-media demo communication system is a process of automatic discovery of devices,connection pairing and video transmission.This process includes serveral state transitions as shown in the following table. During device initialization,the connection state will be configured to idle state by default. When the connection process starts,the connection state will be switched to probing state,and when the connection is completed,the connection state will be switched to connection state. Video and audio communication can only be carried out when the connection state is in connection state.</p>
</dd>
</dl>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>status</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>idle</p></td>
<td><p>During device initialization,the default configuration connection state
is idle state, which is used by both Client and Server.</p></td>
</tr>
<tr class="row-odd"><td><p>probing</p></td>
<td><p>After the device initialization completed,it goes to probing state,
which is used by both Client and Server.</p></td>
</tr>
<tr class="row-even"><td><p>wait probing end</p></td>
<td><p>After receiving the broadcast frame of Prob req, Server enters wait
probing end state,which is only used by Server side.</p></td>
</tr>
<tr class="row-odd"><td><p>connection</p></td>
<td><p>When the connection is completed,both the Client and Server enter the
connection state.</p></td>
</tr>
</tbody>
</table>
<p>Figure 1 describes the whole process of connection and communication between Client and Server in BK-RLK multi-media demo communication system. As shown in the Figure 1, both Client and Server set the connection state to idle state during initialization. Next, both Client and Server will configure BK-RLK (please refer to the Wi-Fi BK-RLK User Guide for the specific configuration of BK-RLK). After the configuration of BK-RLK is completed, Client and Server connection state will be configured as probing state.
After the connection state of Client is changed to probing state, BK-RLK data send interface will be called to continuously send Prop req broadcast frames until BK-RLK receive interface received the Prob rsp unicast frame replied by Server. Client adds the information of the peer device to the BK-RLK peer link list through the received Prob rsp frame. Client changed connection state to the connection state. Then, Client starts video and audio configuration, turns on the camera, turns on the local LCD, turns on the audio, and starts calling the BK-RLK send interface to start business data communication with the Server.
After the connection state of the Server is changed to probing state, it will be in standby state until the Prob req broadcast frame sent by the Client is received through the BK-RLK receive interface. Server will switched state to the wait probing end state and send the Prob rsp unicast frame through the BK-RLK send interface. And then,the connection state switch to the connection state after receiving the ACK. Subsequently, it starts to configure video and audio and carries out business data communication with the Client.</p>
<p>Note:When both the Client and Server are in the connection state,they will automatically connect each other when one of them is disconnected.</p>
<figure class="align-center" id="id1">
<img alt="BK-RLK system connection" src="../../_images/bk_rlk_system_connection.jpg" />
<figcaption>
<p><span class="caption-text">Figure 1. communication flow chart of connection between Client and Server</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<dl class="simple">
<dt>Power save guide between Client and Server:</dt><dd><p>In BK-RLK multi-media demo communication system, the Client can enter the power save state. The Client maintain work state for a period of time and then enter the power save state periodically. The information involved is shown in the following table:</p>
</dd>
</dl>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>role</p></th>
<th class="head"><p>information</p></th>
<th class="head"><p>instruction</p></th>
<th class="head"><p>comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="3"><p>Client</p></td>
<td><p>RLK_RTC_LOWPOWER
_PS_INTERVAL</p></td>
<td><p>power save period,
default 2s</p></td>
<td><p>This value determines the sleep
time of the device.The larger the
value is set, the lower power
consumption will be. At the same
time,the wake up delay may become
larger when peer device wake up
Client device.</p></td>
</tr>
<tr class="row-odd"><td><p>RLK_RTC_LOWPOWER
_KEEPALIVE_TIME
_INTERVAL</p></td>
<td><p>work period,default
2 ms</p></td>
<td><p>After the device goes into sleep,
it needs to periodically monitor
whether there is any business.
This value determins the monitor
time of the device. The smaller
the value is set,the smaller the
work time and power consumption
will be, and it may alse affect
the wake-up delay.</p></td>
</tr>
<tr class="row-even"><td><p>rlkc ps</p></td>
<td><p>sscom cmd. Input by
Client, Client devices
enter sleep mode.</p></td>
<td><p>The API function can be called to
realize this function in the
un-cmd situation.</p></td>
</tr>
<tr class="row-odd"><td><p>Server</p></td>
<td><p>rlks wakeup_peer</p></td>
<td><p>sscom cmd. Input by
Server,wake up Client
device and keep work
mode.</p></td>
<td><p>The API function can be called to
realize this function in the
un-cmd situation.</p></td>
</tr>
</tbody>
</table>
<p>BK-RLK power save usage can be divided into Client and Server:
Client input rlkc ps cmd,whether the cmd takes effect,there are the following forms:</p>
<blockquote>
<div><ul class="simple">
<li><p>Video and audio in progress will stop immediately;</p></li>
<li><p>Using the current detection tool to see that the peak current drops immediately;</p></li>
</ul>
</div></blockquote>
<p>Note:After input rlkc ps cmd,the client device will work with the configured sleep/work cycle. At this time ,all business is stopped. The API function rlk_client_ps_cmd_handler() can be called to realize this function in the un-cmd situation.</p>
<p>Server input rlks wakeup_peer cmd. Server will print WAKEUP PEER SUCCESS information when successfully wake up client.</p>
<p>Notes:After input rlks wakeup_peer cmd, Client device will still work in the configured sleep/work cycle untile the successful print information is received. Business has not been resumed for the Client device. After received the successful print information, Client current returns to the peak value and work again. There is a delay between the input of the cmd and the successful wake up the peer. It depends on the current air environment and the configured sleep cycle and work cycle length. The API function rlk_server_wakeup_peer() can be called to realize this function in the un-cmd situation.</p>
<p>The specific wake up process is shown in Figure 2 below:</p>
<figure class="align-center" id="id2">
<img alt="BK-RLK system ps" src="../../_images/bk_rlk_system_ps.jpg" />
<figcaption>
<p><span class="caption-text">Figure 2. Power save flow chart of Client and Server</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>In an open environment, comparison of power consumption between Standerd Wi-Fi and BK-RLK using the same set of hardware devices are shown in the following table:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>devices</p></th>
<th class="head"><p>condition</p></th>
<th class="head"><p>average power consumption</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Wi-Fi</p></td>
<td><p>Dtim20</p></td>
<td><p>557uA</p></td>
</tr>
<tr class="row-odd"><td><p>BK-RLK</p></td>
<td><p>RLK_RTC_LOWPOWER_PS_INTERVAL = 2s
RLK_RTC_LOWPOWER_KEEPALIVE_TIME_INTERVAL = 2ms</p></td>
<td><p>320uA</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Video and audio transmission guide between Client and Server:</dt><dd><p>After the Client and Server are successfully paired,they automatically enter video and audio transmission mode.</p>
</dd>
</dl>
</section>
<section id="environment-construction">
<h2>3 Environment Construction<a class="headerlink" href="#environment-construction" title="Link to this heading"></a></h2>
<blockquote>
<div><p>BK-RLK multi-media communication system is divided into two parts: Client and Server. And its environment construction is described in Figure 3 and Figure 4.
Figure 3 is a BK7256 sample device as the Client, which adds a usb camera,an LCD display and an audio broadcaster.</p>
</div></blockquote>
<figure class="align-center" id="id3">
<img alt="BK-RLK Client" src="../../_images/bk_rlk_client_env.jpg" />
<figcaption>
<p><span class="caption-text">Figure 3. Client environment construction</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Figure 4 is a BK7256 sample device as the Server, which adds an LCD display and an audio broadcaster.</p>
<figure class="align-center" id="id4">
<img alt="BK-RLK Server" src="../../_images/bk_rlk_server_env.jpg" />
<figcaption>
<p><span class="caption-text">Figure 4. Server environment construction</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="code-path">
<h2>4 Code Path<a class="headerlink" href="#code-path" title="Link to this heading"></a></h2>
<blockquote>
<div><p>BK-RLK Multi-media system demo path: <code class="docutils literal notranslate"><span class="pre">./projects/wifi</span></code></p>
<p>Client demo path:<code class="docutils literal notranslate"><span class="pre">./projects/wifi/rlk_av_client</span></code></p>
<p>Server demo path:<code class="docutils literal notranslate"><span class="pre">./projects/wifi/rlk_av_server</span></code></p>
<p>Client build cmd:<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">bk7256</span> <span class="pre">PROJECT=wifi/rlk_av_client</span></code></p>
<p>Server build cmd:<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">bk7256</span> <span class="pre">PROJECT=wifi/rlk_av_server</span></code></p>
</div></blockquote>
</section>
<section id="reference-materials">
<h2>5 Reference Materials<a class="headerlink" href="#reference-materials" title="Link to this heading"></a></h2>
<blockquote>
<div><p><a class="reference external" href="../../api-reference/wifi/bk_wifi.html">API reference:</a> introduce BK-RLK API interface</p>
<p><a class="reference external" href="../../developer-guide/wifi/bk_rlk.html">BK-RLK development guide:</a> introduce BK-RLK user guide</p>
<p><a class="reference external" href="../../projects_work/wifi/bk_rlk_media.html">BK-RLK project:</a> introduce BK-RLK projects</p>
</div></blockquote>
</section>
</section>


           </div>
             <div class="articleComments">
    <p style="text-align:center" id="doc-feedback"></p>
    

             </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../peripheral/index.html" class="btn btn-neutral float-right" title="Peripheral" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Wi-Fi projects code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 - 2025 Beken Corporation. Last updated: 2025-01-31 17:34:58 

    </p>
  </div> 

</footer>

        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>